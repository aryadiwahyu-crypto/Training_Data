<script>
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "training_data.csv",
        dataType: "text",
        success: function (data) {
            let lines = data.trim().split("\n").map(l => 
                l.split(",").map(c => c.trim()).filter((c, i, arr) => !(i > 0 && i >= arr.length - 5))
            );

            const headers = lines[0];
            const tbody = $("#dataTable tbody");

            // Header
            $("#headerRow").empty();
            headers.forEach(h => $("#headerRow").append(`<th>${h}</th>`));

            // Data rows
            lines.slice(1).forEach(cols => {
                if (cols.length >= headers.length) {
                    let td = cols.slice(0, headers.length)
                        .map(c => `<td>${c}</td>`).join("");
                    tbody.append(`<tr>${td}</tr>`);
                }
            });

            // Search seluruh kolom
            $("#searchInput").on("keyup", function () {
                let val = $(this).val().toLowerCase();
                $("#dataTable tbody tr").each(function () {
                    $(this).toggle($(this).text().toLowerCase().includes(val));
                });
            });
        }
    });
});
</script>
